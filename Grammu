
local Players = game:GetService("Players")

local RunService = game:GetService("RunService")

local UserInputService = game:GetService("UserInputService")

local TweenService = game:GetService("TweenService")

local Workspace = game:GetService("Workspace")



local Plr = Players.LocalPlayer

local Mouse = Plr:GetMouse()

local Camera = Workspace.CurrentCamera



repeat task.wait() until Plr.Character and Plr.Character:FindFirstChild("HumanoidRootPart")

local HRP = Plr.Character:WaitForChild("HumanoidRootPart")



-- UI (Rayfield must be loaded externally by user)

local Rayfield = nil -- assign externally: local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()



-- KEY SYSTEM

local ValidKey = "Flower"

local KeyEnabled = true



-- FUNCTION TO VERIFY KEY

local function VerifyKey(Input)

    return Input == ValidKey

end



-- CONFIGURATION

local Config = {

    AimbotEnabled = false,

    SilentAimEnabled = false,

    ESPEnabled = false,

    WalkSpeed = 16,

    JumpPower = 50,

    FlyEnabled = false,

    Invisibility = false,

    HitboxSize = 2,

    LockPart = "Head", -- or "HumanoidRootPart"

    TeamTagsEnabled = true

}



-- FUNCTION STORAGE (UI callbacks)

local UISetupDone = false



-- KEY GUI

local function CreateKeyPrompt()

    if Rayfield then

        Rayfield:CreateWindow({

            Name = "COCO HUB MM2",

            LoadingTitle = "COCO HUB KEY SYSTEM",

            LoadingSubtitle = "by DevFR960",

            ConfigurationSaving = {

                Enabled = false

            },

            KeySystem = true,

            KeySettings = {

                Title = "COCO HUB KEY",

                Subtitle = "Enter the key to unlock",

                Note = "Key = Flower",

                FileName = "CocoKeyMM2"

            }

        })



        Rayfield:PromptKey({

            Callback = function(Input)

                if VerifyKey(Input) then

                    UISetupDone = true

                end

            end

        })

    else

        warn("Rayfield UI is not loaded. Please assign Rayfield externally.")

    end

end



-- MAIN UI

local function CreateMainUI()

    if not Rayfield then return end



    local MainWindow = Rayfield:CreateWindow({ Name = "COCO HUB MM2", HidePremium = false })



    local MainTab = MainWindow:CreateTab("‚öôÔ∏è Main Functions", 4483362458)

    local CombatTab = MainWindow:CreateTab("üéØ Combat", 4483362458)

    local VisualTab = MainWindow:CreateTab("üîç Visual", 4483362458)

    local UtilityTab = MainWindow:CreateTab("üõ†Ô∏è Utility", 4483362458)



    -- Aimbot toggle

    CombatTab:CreateToggle({

        Name = "Aimbot",

        CurrentValue = false,

        Callback = function(Value)

            Config.AimbotEnabled = Value

        end

    })



    -- Silent Aimbot toggle

    CombatTab:CreateToggle({

        Name = "Silent Aimbot",

        CurrentValue = false,

        Callback = function(Value)

            Config.SilentAimEnabled = Value

        end

    })



    -- ESP toggle

    VisualTab:CreateToggle({

        Name = "ESP (Target Only)",

        CurrentValue = false,

        Callback = function(Value)

            Config.ESPEnabled = Value

        end

    })



    -- Speed slider

    UtilityTab:CreateSlider({

        Name = "WalkSpeed",

        Range = {16, 200},

        Increment = 1,

        CurrentValue = 16,

        Callback = function(Value)

            Config.WalkSpeed = Value

            Plr.Character.Humanoid.WalkSpeed = Value

        end

    })



    -- Jump Power slider

    UtilityTab:CreateSlider({

        Name = "JumpPower",

        Range = {50, 200},

        Increment = 1,

        CurrentValue = 50,

        Callback = function(Value)

            Config.JumpPower = Value

            Plr.Character.Humanoid.JumpPower = Value

        end

    })



    -- Hitbox Expander

    UtilityTab:CreateSlider({

        Name = "Hitbox Size",

        Range = {2, 500},

        Increment = 1,

        CurrentValue = 2,

        Callback = function(Value)

            Config.HitboxSize = Value

            for _, v in pairs(Players:GetPlayers()) do

                if v ~= Plr and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then

                    v.Character.HumanoidRootPart.Size = Vector3.new(Value, Value, Value)

                    v.Character.HumanoidRootPart.Transparency = 0.7

                    v.Character.HumanoidRootPart.Material = Enum.Material.Neon

                end

            end

        end

    })



    -- Toggle Team Tags for MM2

    VisualTab:CreateToggle({

        Name = "Show Team Tags (MM2)",

        CurrentValue = true,

        Callback = function(Value)

            Config.TeamTagsEnabled = Value

        end

    })



    -- Lock Part selector

    CombatTab:CreateDropdown({

        Name = "Lock Part (Aimbot)",

        Options = {"Head", "HumanoidRootPart"},

        CurrentOption = "Head",

        Callback = function(Option)

            Config.LockPart = Option

        end

    })

end



-- EXECUTE FLOW

CreateKeyPrompt()

RunService.RenderStepped:Connect(function()

    if UISetupDone and not Rayfield.UISetupDone then

        CreateMainUI()

        Rayfield.UISetupDone = true

    end

end)
