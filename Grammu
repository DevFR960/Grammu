-- COCO HUB - Rayfield UI + Key System + Team Tags (No Name ESP)

-- Load Rayfield UI
local success, Rayfield = pcall(function()
    return loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
end)

if not success or not Rayfield then
    warn("‚ùå Failed to load Rayfield UI.")
    return
end

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

local ValidKey = "Flower"
local TargetPart = "HumanoidRootPart"
local CurrentTarget

-- üîê Key System
local Window = Rayfield:CreateWindow({
    Name = "üå∏ COCO HUB - MM2 Edition",
    LoadingTitle = "COCO HUB",
    LoadingSubtitle = "by DevFR960",
    ConfigurationSaving = { Enabled = false },
    Discord = { Enabled = false },
    KeySystem = true,
    KeySettings = {
        Title = "COCO HUB Key System",
        Subtitle = "Enter key to unlock",
        Note = "Key = Flower",
        FileName = "COCO_Key",
        SaveKey = false,
        GrabKeyFromSite = false,
        Key = ValidKey
    }
})

local Tab = Window:CreateTab("Main", 4483362458)
Rayfield:Notify({ Title = "‚úÖ Key Accepted", Content = "Welcome to COCO HUB", Duration = 3 })

-- üèÉ WalkSpeed
Tab:CreateButton({
    Name = "WalkSpeed 200",
    Callback = function()
        local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if hum then hum.WalkSpeed = 200 end
    end
})

-- ü¶ò High Jump
Tab:CreateButton({
    Name = "High Jump (150)",
    Callback = function()
        local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if hum then
            hum.JumpPower = 150
            hum:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end
})

-- üîç ESP (NO NAME, JUST MARKERS)
Tab:CreateButton({
    Name = "ESP (No Name)",
    Callback = function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
                local esp = Instance.new("BoxHandleAdornment")
                esp.Adornee = player.Character
                esp.Size = Vector3.new(2, 3, 1)
                esp.Color3 = Color3.fromRGB(255, 50, 50)
                esp.AlwaysOnTop = true
                esp.ZIndex = 5
                esp.Transparency = 0.5
                esp.Parent = player.Character
            end
        end
    end
})

-- üè∑Ô∏è Team Tags (Head Billboard with Team Name)
Tab:CreateButton({
    Name = "Team Tags (Above Head)",
    Callback = function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Team and player.Character and player.Character:FindFirstChild("Head") then
                if not player.Character.Head:FindFirstChild("TeamTag") then
                    local billboard = Instance.new("BillboardGui", player.Character.Head)
                    billboard.Name = "TeamTag"
                    billboard.Size = UDim2.new(0, 100, 0, 20)
                    billboard.StudsOffset = Vector3.new(0, 2, 0)
                    billboard.AlwaysOnTop = true

                    local label = Instance.new("TextLabel", billboard)
                    label.Size = UDim2.new(1, 0, 1, 0)
                    label.BackgroundTransparency = 1
                    label.Text = player.Team.Name
                    label.TextColor3 = player.TeamColor.Color
                    label.TextStrokeTransparency = 0.5
                    label.TextScaled = true
                end
            end
        end
    end
})

-- üéØ Silent Aimbot Bullet Redirect
RunService.RenderStepped:Connect(function()
    local closest, distance = nil, math.huge
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild(TargetPart) then
            local pos = p.Character[TargetPart].Position
            local dist = (LocalPlayer.Character[TargetPart].Position - pos).Magnitude
            if dist < distance then
                distance = dist
                closest = p
            end
        end
    end
    CurrentTarget = closest
end)

UIS.InputBegan:Connect(function(input, gpe)
    if not gpe and input.UserInputType == Enum.UserInputType.MouseButton1 then
        if CurrentTarget and CurrentTarget.Character and CurrentTarget.Character:FindFirstChild(TargetPart) then
            local tool = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Tool")
            if tool and tool:FindFirstChild("Handle") then
                tool.Handle.CFrame = CFrame.new(tool.Handle.Position, CurrentTarget.Character[TargetPart].Position)
            end
        end
    end
end)
