
--==[üåº Key System]===--

local correctKey = "Flower"

local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local Plr = Players.LocalPlayer

local function promptKey()
 local screen = Instance.new("ScreenGui", CoreGui)
 screen.Name = "KeySystem"

 local box = Instance.new("TextBox", screen)
 box.Size = UDim2.new(0, 200, 0, 50)
 box.Position = UDim2.new(0.5, -100, 0.5, -25)
 box.PlaceholderText = "Enter Key"
 box.TextScaled = true

 local confirmed = false

 box.FocusLost:Connect(function(enter)
  if enter and box.Text == correctKey then
   screen:Destroy()
   confirmed = true
  else
   box.Text = ""
   box.PlaceholderText = "Incorrect! Try again."
  end
 end)

 repeat task.wait() until confirmed
end

promptKey()


--==[üéÆ Load Rayfield UI]===--

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
 Name = "COCO HUB - MM2",
 LoadingTitle = "COCO HUB",
 LoadingSubtitle = "by DevFR960",
 ConfigurationSaving = {Enabled = false},
 KeySystem = false,
})


--==[üëÅÔ∏è Create Main Tab Section]===--

local MainTab = Window:CreateTab("Main", 4483362458)
local AimbotSection = MainTab:CreateSection("Combat")
local MovementSection = MainTab:CreateSection("Movement")


--==[üéØ Aimbot & Silent Aimbot]===--

local Camera = workspace.CurrentCamera
local LockPart = "Head" -- or "HumanoidRootPart"

local function getClosestTarget()
 local closest, dist = nil, math.huge
 for _, v in pairs(Players:GetPlayers()) do
  if v ~= Plr and v.Character and v.Character:FindFirstChild(LockPart) then
   local screenPos, onScreen = Camera:WorldToViewportPoint(v.Character[LockPart].Position)
   if onScreen then
    local mag = (Vector2.new(screenPos.X, screenPos.Y) - UserInputService:GetMouseLocation()).Magnitude
    if mag < dist then
     closest = v
     dist = mag
    end
   end
  end
 end
 return closest
end

-- Bullet Redirect
local __namecall
__namecall = hookmetamethod(game, "__namecall", function(self, ...)
 local args = {...}
 local method = getnamecallmethod()
 if tostring(self) == "HitPart" and method == "FireServer" then
  local target = getClosestTarget()
  if target and target.Character and target.Character:FindFirstChild(LockPart) then
   args[1] = target.Character[LockPart]
   args[2] = target.Character[LockPart].Position
   return __namecall(self, unpack(args))
  end
 end
 return __namecall(self, ...)
end)


--==[üö∂ WalkSpeed & JumpPower]===--

local Speed = 16
local Jump = 50

MainTab:CreateSlider({
 Name = "WalkSpeed",
 SectionParent = MovementSection,
 Range = {16, 200},
 Increment = 1,
 CurrentValue = Speed,
 Callback = function(v)
  Speed = v
  if Plr.Character and Plr.Character:FindFirstChild("Humanoid") then
   Plr.Character.Humanoid.WalkSpeed = v
  end
 end,
})

MainTab:CreateSlider({
 Name = "JumpPower",
 SectionParent = MovementSection,
 Range = {50, 200},
 Increment = 1,
 CurrentValue = Jump,
 Callback = function(v)
  Jump = v
  if Plr.Character and Plr.Character:FindFirstChild("Humanoid") then
   Plr.Character.Humanoid.JumpPower = v
  end
 end,
})


--==[üëÄ ESP for Silent Aim Target]===--

local espHighlight
local RunService = game:GetService("RunService")

RunService.RenderStepped:Connect(function()
 local target = getClosestTarget()
 if target and target.Character then
  if not espHighlight then
   espHighlight = Instance.new("Highlight", target.Character)
   espHighlight.FillColor = Color3.fromRGB(255, 50, 50)
   espHighlight.FillTransparency = 0.5
   espHighlight.OutlineTransparency = 1
  end
  espHighlight.Adornee = target.Character
 else
  if espHighlight then
   espHighlight:Destroy()
   espHighlight = nil
  end
 end
end)


--==[üßë‚Äçü§ù‚Äçüßë MM2 Team Tags (Color-coded)]===--

for _, v in pairs(Players:GetPlayers()) do
 if v:FindFirstChild("leaderstats") and not v.Character:FindFirstChild("BillboardGui") then
  local tag = Instance.new("BillboardGui", v.Character:WaitForChild("Head"))
  tag.Size = UDim2.new(0, 100, 0, 40)
  tag.StudsOffset = Vector3.new(0, 2, 0)
  tag.AlwaysOnTop = true

  local txt = Instance.new("TextLabel", tag)
  txt.Size = UDim2.new(1, 0, 1, 0)
  txt.BackgroundTransparency = 1
  txt.TextScaled = true
  txt.Font = Enum.Font.GothamBold
  txt.TextColor3 = Color3.new(1, 1, 1)

  local role = v.leaderstats:FindFirstChild("Team")
  if role then
   if role.Value == "Sheriff" then
    txt.Text = "Sheriff"
    txt.TextColor3 = Color3.fromRGB(0, 255, 255)
   elseif role.Value == "Murderer" then
    txt.Text = "Murderer"
    txt.TextColor3 = Color3.fromRGB(255, 0, 0)
   elseif role.Value == "Innocent" then
    txt.Text = "Innocent"
    txt.TextColor3 = Color3.fromRGB(255, 255, 255)
   end
  end
 end
end
